абораторная работа №1 Учетные записи пользователей в системе Linux
Цель: изучить содержание файлов, где хранятся учетные записи и пароли пользователей и групп
1. Учетные записи располагаются в файле /etc/passwd
(Просмотр: vim/etc/passwd)
student:x:1001:1001::/home/student:/bin/bash
login:x:Номер пользователя:Номер группы по умолчанию:...:Адрес домашней папки:Командная оболочка
2. Пароли хранятся в теневом файле /etc/shadow
Доступ на чтение у файла есть только у админа и у группы root
tmp:!:20012:0:99999:7:::
Имя пользователя: Пароль ("!" - пароля не существует):Последнее изменение пароля: Минимальный возраст пароля: Максимальный возраст пароля: Период предупреждения: Период бездействия: Срок годности: Неиспользованный
3. Информация о группах: /etc/group
tmp:x:1002:

4. Информация о паролях для групп: /etc/gshadow
tmp:!::
5. Права доступа к объектам
Смена прав доступа к объектам выполняется администратором командой chmod
sudo chmod 775 <имя объекта>
sudo chmod g-x <имя объекта>
 
Смена владельцев и группы владельцев выполняется администратором командой chown
sudo chown <владелец:группа владельцев> <имя объекта>
sudo chgrp <группа владельцев> <имя объекта>

Режим группового доступа к объектам можно использовать при смене группы заданной по умолчанию
newgrp <имя группы>

sticky bit - устанваливается только на папки и определяет особые правила удаления объектов  внутри папки.
Для папок с установленным sticky bit запрещается операция удаления файлов дааже для тех пользовтелей, кто имеет права на запись. Владельцы объектов и пользователи входящие в группу владельцов папки имееют возможность удалить свои объекты без ограничений.

уУстанавливается sticky bit при помощи команды:

sudo chmod o+t <имя папки>
sudo 1775 <имя папки>

Права доступа до установки спецбита:
student@alexander-VirtualBox:~$ stat SB008/
  Файл: SB008/
  Размер: 4096      	Блоков: 8          Блок В/В: 4096   каталог
Устройство: 803h/2051d	Инода: 938880      Ссылки: 2
Доступ: (0777/drwxrwxrwx)  Uid: ( 1001/ student)   Gid: ( 1001/ student)

Пример установки бита:
student@alexander-VirtualBox:~$ sudo chmod o+t SB008/
student@alexander-VirtualBox:~$ stat SB008/
  Файл: SB008/
  Размер: 4096      	Блоков: 8          Блок В/В: 4096   каталог
Устройство: 803h/2051d	Инода: 938880      Ссылки: 2
Доступ: (1777/drwxrwxrwt)  Uid: ( 1001/ student)   Gid: ( 1001/ student)

Права доступа к объектам внутри SB008:
tmp6@alexander-VirtualBox:/home/student/SB008$ ls -l
итого 8
drwxrwxrwx 2 student student 4096 ноя  6 12:37 F
-rw-rw-rw- 1 student student    0 ноя  6 12:36 f1
drwxrwxr-x 2 tmp6    tmp6    4096 ноя  6 12:40 F1
-rw-rw-rw- 1 student student    0 ноя  6 12:36 f2
-rw-rw-r-- 1 tmp6    tmp6       0 ноя  6 12:39 f3
-rw-rw-r-- 1 tmp6    tmp6       0 ноя  6 12:39 f4

Поытка удалить файл владельца student  от пользователя tmp6:
tmp6@alexander-VirtualBox:/home/student/SB008$ rm f1
rm: невозможно удалить 'f1': Операция не позволена

При этом файл f1  пользователь tmp6 может редактироват и даже перезаписать полностью

От имени владельца ппапки с установленным sticky bit можно удалять объекты без дополнительных ограничений:
student@alexander-VirtualBox:~/SB008/F$ ls -l
итого 0
-rw-rw-r-- 1 tmp6    tmp6    0 ноя  6 12:43 f2
-rw-rw-r-- 1 tmp6    tmp6    0 ноя  6 12:43 f3
-rw-rw-r-- 1 tmp6    tmp6    0 ноя  6 12:43 f4
-rw-rw-rw- 1 student student 0 ноя  6 12:48 f5
-rw-rw-rw- 1 student student 0 ноя  6 12:48 f6

student@alexander-VirtualBox:~/SB008/F$ rm f3
rm: удалить защищённый от записи пустой обычный файл 'f3'? y
student@alexander-VirtualBox:~/SB008/F$ ls
f2  f4  f5  f6

:wq
 

